@{
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
    var _stallId = (int)ViewBag.StallId;
    Page.Title = "久等了";
}

<div ng-init="custCtrl.loadStallProducts(@_stallId)"></div>
<div ng-if="custCtrl.currentStall">
    <div id="stall-header">
        <img ng-src="/stalls/{{custCtrl.currentStall.Id}}/avatar.png" />
        <div class="info">
            <div>{{custCtrl.currentStall.Name}}</div>
            <button>运费 | 营业时间 | 其他信息</button>
        </div>
    </div>
    <div class="ProductList">
        <div class="item" ng-repeat="product in custCtrl.currentStall.Products track by product.Id">
            <div class="left">
                <img ng-src="{{product.Image}}" ng-click="gotoUrl('/product/' + product.Id)" />
            </div>
            <div class="right">
                <div class="product-name" ng-click="gotoUrl('/product/' + product.Id)">{{product.Name}}</div>
                <div class="price-quantity">
                    <span>{{product.Price|currency:$}}</span>
                    <select ng-model="product.Quantity">
                        <option ng-repeat="n in product.QuantityOptions track by $index" value="{{$index+1}}">
                            ×{{$index+1}}
                        </option>
                    </select>
                </div>
                <div class="operation">
                    <button ng-click="custCtrl.cart.add({stallId:product.StallId, stallName:product.StallName,
                                                id:product.Id, name:product.Name,price:product.Price, variant:''}, product.Quantity)">
                        加入购物车
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="load-more-bar">
        <span>没有更多商品了</span>
    </div>
</div>
<div id="empty-content" ng-if="custCtrl.currentStall===null">
    店铺不存在
</div>
